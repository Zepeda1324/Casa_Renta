<!doctype html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Casa Campestre - Fiestas & Reuniones</title>
	<style>
		:root{--bg:#fafafa;--card:#fff;--accent:#0078d4;--muted:#666}
		body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#111;-webkit-font-smoothing:antialiased}
		header{padding:2rem 1rem 1.5rem;text-align:center;background:linear-gradient(135deg,#0078d4 0%,#005a9e 100%);color:#fff;box-shadow:0 2px 12px rgba(0,0,0,.1)}
		h1{margin:0 0 .5rem 0;font-size:2rem;font-weight:700;letter-spacing:-.02em;text-shadow:0 2px 8px rgba(0,0,0,.2)}
		p.lead{margin:0;color:rgba(255,255,255,.92);font-size:1.05rem;font-weight:400;letter-spacing:.01em}

		.gallery{max-width:900px;margin:0.8rem auto;padding:0 12px;display:grid;grid-template-columns:1fr 1fr;gap:10px}
		.gallery.single-view{display:flex;justify-content:center}
		.gallery.single-view .card{display:none;width:100%;max-width:420px}
		.gallery.single-view .card:first-child{display:block}
		.card{background:var(--card);border-radius:10px;overflow:hidden;box-shadow:0 1px 6px rgba(0,0,0,.06);cursor:pointer;display:block;text-decoration:none;color:inherit}
		.thumb{display:block;width:100%;height:160px;object-fit:cover}
		.caption{padding:.45rem .6rem;font-size:.95rem;color:var(--muted);text-align:left;display:flex;align-items:center;justify-content:space-between;gap:8px}
		.thumb-name{color:var(--muted);font-size:.95rem;flex:1}
		.counter-badge{color:var(--muted);font-weight:600;font-size:.95rem;white-space:nowrap}

		.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.78);z-index:60;padding:12px}
		.modal.open{display:flex}
		.modal-inner{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}
		.modal img{max-width:100%;max-height:78vh;border-radius:8px;box-shadow:0 10px 40px rgba(0,0,0,.6)}
		.modal .info{position:absolute;left:12px;right:12px;bottom:14px;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.7);font-size:.95rem;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:0 6px}
		.modal .info .caption{flex:1;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
		.modal .info .counter{flex:0 0 auto;font-weight:600}

		.btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.45);border:none;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer}
		.btn:focus{outline:2px solid rgba(255,255,255,.15)}
		.btn.prev{left:8px}
		.btn.next{right:8px}
		.btn.close{top:12px;right:12px;transform:none;border-radius:999px;padding:6px}

		.desktop-overlay{position:fixed;inset:0;background:linear-gradient(0deg,rgba(0,0,0,.78),rgba(0,0,0,.65));display:flex;align-items:center;justify-content:center;z-index:999;padding:20px;color:#fff;text-align:center}
		.desktop-overlay .box{max-width:640px;background:rgba(255,255,255,.03);padding:18px;border-radius:12px}
		.desktop-overlay h2{margin:0 0 8px 0;font-size:1.25rem}
		.desktop-overlay p{margin:0 0 12px 0;color:rgba(255,255,255,.9)}
		.desktop-overlay .actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
		.action-btn{background:var(--accent);border:none;color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer}
		.action-muted{background:transparent;border:1px solid rgba(255,255,255,.15);color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer}

		body.blocked .gallery, body.blocked .modal{filter:blur(2px);pointer-events:none;user-select:none}

		.location-section{max-width:900px;margin:2rem auto 1.5rem;padding:0 12px}
		.location-card{background:var(--card);border-radius:12px;padding:1.25rem;box-shadow:0 2px 10px rgba(0,0,0,.08)}
		.location-card h2{margin:0 0 .4rem 0;font-size:1.15rem;color:#111;display:flex;align-items:center;justify-content:center;gap:8px}
		.location-card h2::before{content:'üìç';font-size:1.3rem}
		.location-card p{margin:0 0 1rem 0;color:var(--muted);font-size:.9rem;text-align:center}
		.map-container{border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.12)}
		.map-container iframe{width:100%;height:280px;border:0;display:block}

		footer{background:linear-gradient(135deg,#0078d4 0%,#005a9e 100%);color:#fff;padding:2rem 1rem 1rem;margin-top:2.5rem;text-align:center}
		footer h3{margin:0 0 .5rem 0;font-size:1.1rem;font-weight:600}
		footer p{margin:0 0 1.25rem 0;color:rgba(255,255,255,.9);font-size:.95rem}
		.phone-link{display:inline-flex;align-items:center;gap:10px;background:rgba(255,255,255,.95);color:#0078d4;text-decoration:none;padding:.85rem 1.75rem;border-radius:8px;font-weight:700;font-size:1.05rem;box-shadow:0 3px 12px rgba(0,0,0,.2);transition:transform .2s,box-shadow .2s}
		.phone-link:hover{transform:translateY(-2px);box-shadow:0 5px 16px rgba(0,0,0,.3)}
		.phone-link::before{content:'üìû';font-size:1.25rem}
		.copyright{margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.85);font-size:.85rem}

		@media (max-width:420px){
			.gallery{grid-template-columns:1fr;gap:8px}
			.thumb{height:180px}
			.modal img{max-height:72vh}
		}
		@media (min-width:720px){
			.gallery{max-width:900px;margin-top:28px}
		}
	</style>
</head>
<body>
	<header>
		<h1>Casa Campestre</h1>
		<p class="lead">Para Fiestas & Reuniones Familiares</p>
	</header>

	<main>
	<div class="gallery single-view" id="gallery">
			<a class="card" tabindex="0" data-full="Exterior1.jpeg" data-caption="Vista frontal de la propiedad">
				<img class="thumb" src="Exterior1.jpeg" alt="Exterior 1">
				<div class="caption">
					<span id="thumbName" class="thumb-name">Vista frontal de la propiedad</span>
					<span id="thumbCounterBadge" class="counter-badge">1/9</span>
				</div>
			</a>
			<a class="card" tabindex="0" data-full="Exterior2.jpeg" data-caption="Fachada y entorno paisaj√≠stico">
				<img class="thumb" src="Exterior2.jpeg" alt="Exterior 2">
				<div class="caption">Fachada y entorno paisaj√≠stico</div>
			</a>
			<a class="card" tabindex="0" data-full="Exterior3.jpeg" data-caption="√Årea exterior con vegetaci√≥n">
				<img class="thumb" src="Exterior3.jpeg" alt="Exterior 3">
				<div class="caption">√Årea exterior con vegetaci√≥n</div>
			</a>
			<a class="card" tabindex="0" data-full="Sala.jpeg" data-caption="Espacio amplio para reuniones">
				<img class="thumb" src="Sala.jpeg" alt="Sala">
				<div class="caption">Espacio amplio para reuniones</div>
			</a>
			<a class="card" tabindex="0" data-full="Comedor.jpeg" data-caption="Mesa ideal para compartir en familia">
				<img class="thumb" src="Comedor.jpeg" alt="Comedor">
				<div class="caption">Mesa ideal para compartir en familia</div>
			</a>
			<a class="card" tabindex="0" data-full="Cocina.jpeg" data-caption="Espacio equipado y funcional">
				<img class="thumb" src="Cocina.jpeg" alt="Cocina">
				<div class="caption">Espacio equipado y funcional</div>
			</a>
			<a class="card" tabindex="0" data-full="Habitacion1.jpeg" data-caption="Descanso c√≥modo y tranquilo">
				<img class="thumb" src="Habitacion1.jpeg" alt="Habitaci√≥n 1">
				<div class="caption">Descanso c√≥modo y tranquilo</div>
			</a>
			<a class="card" tabindex="0" data-full="Habitacion2.jpeg" data-caption="Dormitorio con iluminaci√≥n natural">
				<img class="thumb" src="Habitacion2.jpeg" alt="Habitaci√≥n 2">
				<div class="caption">Dormitorio con iluminaci√≥n natural</div>
			</a>
			<a class="card" tabindex="0" data-full="Habitacion3.jpeg" data-caption="Rec√°mara acogedora y privada">
				<img class="thumb" src="Habitacion3.jpeg" alt="Habitaci√≥n 3">
				<div class="caption">Rec√°mara acogedora y privada</div>
			</a>
		</div>
	</main>

	<section class="location-section">
		<div class="location-card">
			<h2>Ubicaci√≥n</h2>
			<p>Ubicaci√≥n aproximada</p>
			<div class="map-container">
				<iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3757.2!2d-103.72108333333333!3d19.204250000000003!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTnCsDEyJzE1LjMiTiAxMDPCsDQzJzE1LjkiVw!5e0!3m2!1ses!2smx!4v1" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
			</div>
		</div>
	</section>

	<footer>
		<h3>M√°s Informaci√≥n</h3>
		<p>¬øTe interesa rentar la casa? Cont√°ctanos para conocer disponibilidad y precios</p>
		<a href="tel:+523532054291" class="phone-link">Llamar Ahora</a>
		<div class="copyright">¬© 2025 Casa Campestre. Todos los derechos reservados.</div>
	</footer>

	<div id="desktopOverlay" class="desktop-overlay" aria-hidden="true" style="display:none">
		<div class="box">
			<h2>Vista solo para celular</h2>
			<p>Esta p√°gina est√° optimizada para tel√©fonos m√≥viles. Para la mejor experiencia, √°brela desde tu celular.</p>
			<div class="actions">
				<button id="copyLinkBtn" class="action-btn">Copiar enlace al m√≥vil</button>
				<button id="openAnywayBtn" class="action-muted">Abrir aqu√≠ de todos modos</button>
			</div>
			<p style="margin-top:10px;color:rgba(255,255,255,.8);font-size:.9rem">Puedes pegar el enlace en tu tel√©fono o escanearlo desde la barra de direcciones.</p>
		</div>
	</div>

	<!-- Modal / Lightbox -->
	<div class="modal" id="modal" aria-hidden="true">
		<div class="modal-inner" role="dialog" aria-modal="true">
			<button class="btn close" id="closeBtn" aria-label="Cerrar">‚úï</button>
			<button class="btn prev" id="prevBtn" aria-label="Anterior">‚óÄ</button>
			<img id="modalImg" src="" alt="">
			<div class="info" id="modalInfo" role="group" aria-label="Informaci√≥n de la imagen">
				<span id="modalCaption" class="caption"></span>
				<span id="modalCounter" class="counter" aria-live="polite"></span>
			</div>
			<button class="btn next" id="nextBtn" aria-label="Siguiente">‚ñ∂</button>
		</div>
	</div>

	<script>
		(function(){
			const gallery = document.getElementById('gallery');
			const modal = document.getElementById('modal');
			const modalImg = document.getElementById('modalImg');
			const modalCaption = document.getElementById('modalCaption');
			const closeBtn = document.getElementById('closeBtn');
			const prevBtn = document.getElementById('prevBtn');
			const nextBtn = document.getElementById('nextBtn');
			const desktopOverlay = document.getElementById('desktopOverlay');
			const copyLinkBtn = document.getElementById('copyLinkBtn');
			const openAnywayBtn = document.getElementById('openAnywayBtn');
			const thumbName = document.getElementById('thumbName');
			const thumbCounterBadge = document.getElementById('thumbCounterBadge');

			const items = Array.from(gallery.querySelectorAll('.card'));
			const modalCounter = document.getElementById('modalCounter');
			let current = -1;

			// Store original thumbnail sources to restore them correctly
			const originalThumbs = items.map(item => {
				const thumb = item.querySelector('.thumb');
				return thumb ? { src: thumb.src, alt: thumb.alt } : null;
			});

			function open(index){
				const item = items[index];
				if(!item) return;
				const url = item.dataset.full;
				const cap = item.dataset.caption || '';
				modalImg.src = url;
				modalImg.alt = cap;
			modalCaption.textContent = cap;
			// actualizar contador: e.g. "1/8"
			if(modalCounter) modalCounter.textContent = `${index+1}/${items.length}`;
			if(thumbCounterBadge) thumbCounterBadge.textContent = `${index+1}/${items.length}`;
			if(thumbName) thumbName.textContent = cap;
				modal.classList.add('open');
				modal.setAttribute('aria-hidden','false');
				current = index;
				updateControls();
			}

		function close(){
			// Store the index and restore/update the thumbnail visual and info
			if(current !== -1){
				const first = items[0];
				const opened = items[current];
				if(first && opened){
					first.dataset.showsIndex = String(current);
					const firstThumb = first.querySelector('.thumb');
					// Always restore from originalThumbs array to get the correct image
					if(firstThumb && originalThumbs[current]) {
						firstThumb.src = originalThumbs[current].src;
						firstThumb.alt = originalThumbs[current].alt;
					}
					// Update the visible name and counter
					if(thumbName) thumbName.textContent = opened.dataset.caption || '';
					if(thumbCounterBadge) thumbCounterBadge.textContent = `${current+1}/${items.length}`;
				}
			}

			modal.classList.remove('open');
			modal.setAttribute('aria-hidden','true');
			modalImg.src = '';
			if(modalCounter) modalCounter.textContent = '';
			current = -1;
		}			function showNext(dir){
				if(current === -1) return;
				const nextIndex = current + dir;
				// prevent wrapping: do nothing if out of bounds
				if(nextIndex < 0 || nextIndex >= items.length) return;
				open(nextIndex);
			}

			function updateControls(){
				if(prevBtn) {
					prevBtn.disabled = current <= 0;
					prevBtn.style.opacity = prevBtn.disabled ? '0.35' : '1';
				}
				if(nextBtn) {
					nextBtn.disabled = current >= items.length - 1;
					nextBtn.style.opacity = nextBtn.disabled ? '0.35' : '1';
			}
			if(modalCounter) modalCounter.textContent = `${current+1}/${items.length}`;
		}			// click on thumbnails
			items.forEach((it, idx)=>{
				if(idx === 0){
					// first thumbnail may represent a different image after closing the modal
					it.addEventListener('click', ()=>{
						const showIdx = it.dataset.showsIndex;
						open(showIdx ? Number(showIdx) : idx);
					});
					it.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); const showIdx = it.dataset.showsIndex; open(showIdx ? Number(showIdx) : idx); } });
				} else {
					it.addEventListener('click', ()=>open(idx));
					it.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); open(idx); } });
				}
			});

			// controls
			closeBtn.addEventListener('click', close);
			prevBtn.addEventListener('click', ()=>showNext(-1));
			nextBtn.addEventListener('click', ()=>showNext(1));

			// click outside image closes
			modal.addEventListener('click', (e)=>{ if(e.target === modal) close(); });

			// keyboard
			document.addEventListener('keydown', (e)=>{
				if(modal.classList.contains('open')){
					if(e.key === 'Escape') close();
					if(e.key === 'ArrowRight') showNext(1);
					if(e.key === 'ArrowLeft') showNext(-1);
				}
			});

			// Mobile / Desktop detection
			function isMobileDevice(){
				const ua = navigator.userAgent || '';
				const small = window.innerWidth <= 720;
				const touch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;
				const mobileUA = /Mobi|Android|iPhone|iPad|iPod|Phone/i.test(ua);
				return mobileUA || touch || small;
			}

			function showDesktopOverlay(){
				desktopOverlay.style.display = 'flex';
				desktopOverlay.setAttribute('aria-hidden','false');
				document.body.classList.add('blocked');
			}

			function hideDesktopOverlay(){
				desktopOverlay.style.display = 'none';
				desktopOverlay.setAttribute('aria-hidden','true');
				document.body.classList.remove('blocked');
			}

			// on load decide
			if(!isMobileDevice()){
				showDesktopOverlay();
		}

		// inicializar info de miniatura antes de abrir im√°genes
		if(thumbCounterBadge) thumbCounterBadge.textContent = `1/${items.length}`;
		if(thumbName && items[0]) thumbName.textContent = items[0].dataset.caption || '';

		// copy link to clipboard (for user to paste in phone)
			copyLinkBtn.addEventListener('click', async ()=>{
				try{
					await navigator.clipboard.writeText(location.href);
					copyLinkBtn.textContent = 'Enlace copiado ‚úì';
					setTimeout(()=>{ copyLinkBtn.textContent = 'Copiar enlace al m√≥vil'; },3000);
				}catch(e){
					alert('No fue posible copiar autom√°ticamente. Copia la URL desde la barra de direcciones.');
				}
			});

			// allow opening on desktop if user wants
			openAnywayBtn.addEventListener('click', ()=>{
				hideDesktopOverlay();
			});
		})();
	</script>

</body>
</html>
